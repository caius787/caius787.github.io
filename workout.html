<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Planner & Tracker</title>
    <style>
        /* Reset default styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 50px;
            position: relative;
        }

        /* Main Box Styling */
        .main-box {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 600px;
            position: relative;
            cursor: default;
        }

        /* Workout Section */
        .workout-section {
            margin-bottom: 20px;
        }

        .workout-section h2 {
            text-align: center;
            margin-bottom: 15px;
        }

        .workout-list {
            list-style: none;
        }

        .workout-list li {
            padding: 10px;
            background-color: #f9f9f9;
            margin-bottom: 10px;
            border-left: 5px solid #28a745;
            border-radius: 5px;
            transition: background-color 0.3s;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .workout-list li:hover {
            background-color: #e9e9e9;
        }

        .workout-list li input[type="checkbox"] {
            margin-right: 10px;
            cursor: pointer;
        }

        /* Timer Section */
        .timer-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 250px;
            padding: 20px;
            background-color: #fff;
            border: 2px solid #28a745;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            position: absolute;
            top: 20px;
            right: 20px;
            cursor: move;
            z-index: 10;
        }

        .timer-header h2 {
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .timer-display {
            font-size: 2em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 10px;
        }

        .timer-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .timer-button {
            padding: 3px 5px;
            font-size: 0.9em;
            cursor: pointer;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
            width: 30px;
            height: 30px;
        }

        .timer-button:hover:not(:disabled) {
            background-color: #218838;
        }

        .timer-button:disabled {
            background-color: #94d3a2;
            cursor: not-allowed;
        }

        /* Draggable Cursor Change */
        .timer-box.dragging {
            opacity: 0.7;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .timer-box {
                position: relative;
                top: auto;
                right: auto;
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>

    <!-- Main Box -->
    <div class="main-box" id="mainBox">
        <!-- Workout Section -->
        <div class="workout-section">
            <h2>Today's Workout: <span id="workoutType">Loading...</span></h2>
            <ul class="workout-list" id="workoutList">
                <!-- Workouts will be dynamically inserted here -->
            </ul>
        </div>
    </div>

    <!-- Timer Box -->
    <div class="timer-box" id="timerBox">
        <div class="timer-header">
            <h2>Timer</h2>
        </div>
        <div class="timer-display">
            <!-- Minutes Section -->
            <div class="timer-section">
                <button class="timer-button" id="incMin">+</button>
                <span id="minutes">00</span>
                <button class="timer-button" id="decMin">-</button>
            </div>
            :
            <!-- Seconds Section -->
            <div class="timer-section">
                <button class="timer-button" id="incSec">+</button>
                <span id="seconds">00</span>
                <button class="timer-button" id="decSec">-</button>
            </div>
        </div>
        <div class="timer-controls">
            <button class="timer-button" onclick="startTimer()" id="startBtn">Start</button>
            <button class="timer-button" onclick="resetTimer()" id="resetBtn">Reset</button>
        </div>
    </div>

    <!-- Audio Element for Ding Sound -->
    <audio id="dingSound" src="ding.mp3" preload="auto"></audio>

    <script>
        // Define workout schedule for each day
        const workoutSchedule = {
            0: "Core",       // Sunday
            1: "Arms",       // Monday
            2: "Legs",       // Tuesday
            3: "Arms",       // Wednesday
            4: "Core",       // Thursday
            5: "Rest Day",   // Friday
            6: "Rest Day"    // Saturday
        };

        function getTodayWorkout() {
            const today = new Date();
            const day = today.getDay(); // 0=Sunday, 1=Monday,...6=Saturday
            return workoutSchedule[day];
        }

        function initializeWorkouts() {
            const workoutList = document.getElementById("workoutList");
            workoutList.innerHTML = "";
            const workoutType = getTodayWorkout();
            document.getElementById("workoutType").textContent = workoutType;

            const exercises = {
                "Legs": [
                    "10 Lunges per Leg with Weight",
                    "3x10 Squats",
                    "4x20 Calf Raises",
                    "3x10 Elastic Leg Extensions",
                    "6x10 Side Leg Lifts"
                ],
                "Arms": [
                    "6x10 Bicep Curls",
                    "6x10 Tricep Curls",
                    "2x10 Pushups",
                    "1:30 Hold",
                    "3x10 Shoulder Lifts"
                ],
                "Core": [
                    "60 Situps with Weights",
                    "2:04 Plank",
                    "3x10 Seconds Superman",
                    "3x20 Flutter Kicks",
                    "3x10 Lie Down Thrust"
                ],
                "Rest Day": [
                    "Rest and recover."
                ]
            };

            const todaysExercises = exercises[workoutType] || ["Rest and recover."];

            todaysExercises.forEach((exercise, index) => {
                const li = document.createElement("li");
                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.id = `workout-${index}`;
                checkbox.style.marginRight = "10px";
                li.appendChild(checkbox);
                li.appendChild(document.createTextNode(exercise));
                workoutList.appendChild(li);

                // Make the entire list item clickable
                li.addEventListener('click', (e) => {
                    if (e.target.tagName !== 'INPUT') {
                        checkbox.checked = !checkbox.checked;
                    }
                });
            });
        }

        // Timer Variables
        let timerInterval = null;
        let totalSeconds = 0;
        let isTimerRunning = false;

        // Elements
        const minutesSpan = document.getElementById("minutes");
        const secondsSpan = document.getElementById("seconds");
        const incMinBtn = document.getElementById("incMin");
        const decMinBtn = document.getElementById("decMin");
        const incSecBtn = document.getElementById("incSec");
        const decSecBtn = document.getElementById("decSec");
        const startBtn = document.getElementById("startBtn");
        const resetBtn = document.getElementById("resetBtn");
        const dingSound = document.getElementById("dingSound");
        const timerBox = document.getElementById("timerBox");

        // Function to update the timer display
        function updateTimerDisplay() {
            const minutes = String(Math.floor(totalSeconds / 60)).padStart(2, '0');
            const seconds = String(totalSeconds % 60).padStart(2, '0');
            minutesSpan.textContent = minutes;
            secondsSpan.textContent = seconds;
        }

        // Function to start the timer
        function startTimer() {
            if (isTimerRunning || totalSeconds <= 0) return;
            isTimerRunning = true;
            disableAdjustments();

            // Play sound when timer ends; user interaction via Start allows permission
            dingSound.volume = 1.0;

            timerInterval = setInterval(() => {
                if (--totalSeconds < 0) {
                    clearInterval(timerInterval);
                    dingSound.play();
                    isTimerRunning = false;
                    enableAdjustments();
                } else {
                    updateTimerDisplay();
                }
            }, 1000);
        }

        // Function to reset the timer
        function resetTimer() {
            clearInterval(timerInterval);
            totalSeconds = 0;
            isTimerRunning = false;
            enableAdjustments();
            updateTimerDisplay();
        }

        // Disable timer adjustment buttons while running
        function disableAdjustments() {
            incMinBtn.disabled = true;
            decMinBtn.disabled = true;
            incSecBtn.disabled = true;
            decSecBtn.disabled = true;
            startBtn.disabled = true;
            resetBtn.disabled = false;
        }

        // Enable timer adjustment buttons when not running
        function enableAdjustments() {
            incMinBtn.disabled = false;
            decMinBtn.disabled = false;
            incSecBtn.disabled = false;
            decSecBtn.disabled = false;
            startBtn.disabled = false;
            resetBtn.disabled = false;
        }

        // Event listeners for adjustment buttons
        incMinBtn.addEventListener('click', () => {
            if (isTimerRunning) return;
            if (totalSeconds < 3599) { // Max 59:59
                totalSeconds += 60;
                updateTimerDisplay();
            }
        });

        decMinBtn.addEventListener('click', () => {
            if (isTimerRunning) return;
            if (totalSeconds >= 60) {
                totalSeconds -= 60;
                updateTimerDisplay();
            }
        });

        incSecBtn.addEventListener('click', () => {
            if (isTimerRunning) return;
            if (totalSeconds < 3599) { // Max 59:59
                totalSeconds += 1;
                updateTimerDisplay();
            }
        });

        decSecBtn.addEventListener('click', () => {
            if (isTimerRunning) return;
            if (totalSeconds >= 1) {
                totalSeconds -= 1;
                updateTimerDisplay();
            }
        });

        // Draggable functionality for the timer box
        let isDragging = false;
        let dragOffsetX = 0;
        let dragOffsetY = 0;

        timerBox.addEventListener('mousedown', (e) => {
            // Allow dragging only if clicked on header or display
            if (e.target.closest('.timer-header') || e.target.closest('.timer-display')) {
                isDragging = true;
                dragOffsetX = e.clientX - timerBox.offsetLeft;
                dragOffsetY = e.clientY - timerBox.offsetTop;
                timerBox.classList.add('dragging');
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                let left = e.clientX - dragOffsetX;
                let top = e.clientY - dragOffsetY;

                // Constrain within the viewport
                left = Math.max(0, Math.min(left, window.innerWidth - timerBox.offsetWidth));
                top = Math.max(0, Math.min(top, window.innerHeight - timerBox.offsetHeight));

                timerBox.style.left = `${left}px`;
                timerBox.style.top = `${top}px`;
            }
        });

        document.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                timerBox.classList.remove('dragging');
            }
        });

        // Initialize workouts on page load
        window.onload = initializeWorkouts;
    </script>

</body>
</html>